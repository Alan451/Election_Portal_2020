{% extends "base_copy.html" %}
{% load static %}
{% load tags %}
{% block designation %}
    {{post}}
{% endblock designation %}

{% block designation_info %}
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
{% endblock designation_info %}

{% block save_and_next %}
<div class="sm:flex sm:flex-wrap w-full">
<!-- <div class="inline mt-10 pr-7 2xl:pr-80 sm:pr-auto pl-7 sm:pl-7 space-y-4 voter-list-btn"> -->
      <div class=" w-full sm:w-7/12 md:w-5/12">
        <div class="flex bg-gray-100 w-full rounded-lg p-5 h-full items-center">
          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" class="text-indigo-500 w-6 h-6 flex-shrink-0 mr-4" viewBox="0 0 24 24">
            <path d="M22 11.08V12a10 10 0 11-5.93-9.14"></path>
            <path d="M22 4L12 14.01l-3-3"></path>
          </svg>
          <span>
            <span class="font-ah  text-base">
              <span class="opted-for font-bold text-gray-800 ">
              Select the candidiate you want to vote for.
            </span>
            <br>
            <span class = " opacity-80">Tip: You can also use Keyboard Keys respective to the candidiate to Vote.</span>
          </span>
          </span>
        </div>
      </div>
      <div class="sm:float-right h-full w-full sm:w-5/12 md:w-7/12 py-2">
        <form method="post" class= "space-y-5 sm:space-x-5 "><!-- onsubmit="call_post_req()" -->
          {% csrf_token %}
        
            <button id="next-btn" type="submit" class="opacity-10 cursor-not-allowed sm:mr-auto float-right bg-black text-white h-16 sm:h-14 w-full sm:w-48 text-xl sm:text-lg text-center font-bold rounded-sm next-btn px-5 green_ki_ma_ki_black" disabled>Next</button>
            <button id="nota" type="button" onclick="voteClick('{{contestantList.0.post}}')" class="float-right  bg-custom text-custom h-16 sm:h-14 w-full sm:w-48 text-xl sm:text-lg text-center font-bold rounded-sm next-btn px-5">NOTA</button>
          
          <input type="hidden" name="choice" id="res">
          
          <!-- <div class="p-4 w-full text-lg text-right info-block text-gray-600 hidden" style="background-color: #f9f9f969;">
      
            <div class="w-1/2 float-right">
              You have opted for <span class="opted-for font-bold"></span>.
              Click on Next to confirm your choice. You may review and modify your choices at the end.
            </div> -->
        </form>
      </div> 
  </div>
  <div class="w-full h-32 block sm:hidden">

  </div>

{% endblock save_and_next %} 

{% block content %}
{{ pks|json_script:"pks-data" }}
  <ul class="nota-effect space-y-4 sm:space-y-0 sm:flex sm:space-x-4">
      {% for i in contestantList %}
        <li id="{{i.pk}}"
          class="custom-li hover:shadow transition-colors duration-300 ease-in-out bg-gray-50 border-2 border-black pl-4 rounded-md flex space-x-4"
        >
          <span  class="py-4 flex flex-wrap content-center ">
            <span id = "action_box_container_{{i.pk}}"
              class=" transition-opacity duration-500 ease-in-out absolute m-auto border border-black rounded-md bg-gray-100 text-base font-bold px-3 py-2 ">
              <span id="text_{{i.pk}}" class="hidden" >Vote for</span><span id="index_{{i.pk}}">{{forloop.counter|to_char}}
              </span>
            </span>
          </span>
          <span class="py-6">
            <span><img
                class="rounded-sm"
                width="130"
                src="{% static i.pic %}" />
            </span>
          </span>
          <span class="py-6"
            ><p class="text-xl name_{{i.pk}} font-bold text-gray-800">{{i.name}}</p>
            <ul
              class="font-medium max-w-md space-y-1 text-1xl pt-2 text-gray-600"
            >
              <li>{{i.agenda1}}</li>
              <li>{{i.agenda2}}</li>
              <li>{{i.agenda3}}</li>
              <li>{{i.agenda4}}</li>
            </ul>
          </span>
        </li>
        {% if forloop.counter|divisibleby:2 %}
          </ul>
          <ul class="nota-effect space-y-4 sm:space-y-0 sm:flex sm:space-x-4">
        {% endif %}
      {% endfor %}
  </ul>
  <script>
    function voteClick(the_chosen_one) {
      
      document.getElementById("res").value = the_chosen_one;
      // console.log(the_chosen_one);
    }

    // function call_post_req(){
    //   post_req(vote_chosen);
    // }
  

    // function post_req(data) {
    //     var allCookies = document.cookie;
    //     var csrf = allCookies.substring(10);
    //     var postdata = {
    //         choice: data,
    //         'csrfmiddlewaretoken': csrf
    //     };
    //     $.post('/voter/vote/', postdata);
    // }
  </script>
{% endblock content %}

{% block vote_js %}  
  <script>
    $(document).ready(function () {
      var ids = JSON.parse(document.getElementById('pks-data').textContent);
      getIds(ids);
      setProgress('{{post}}', {{request.session.total_no}});
    });
  </script>
  
  <script src="{% static 'js/vote.js' %}"></script>
{% endblock vote_js %}

